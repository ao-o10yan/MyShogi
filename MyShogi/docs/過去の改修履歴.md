
# 過去の改修履歴

- 最新の情報は、[WIP](WIP.md)をご覧ください。


## マスターアップ → Update1まで


- "1.1.0"をUpdate1としました。ご協力いただいた皆様、ありがとうございました。[2018/08/31]


- "1.0.9"→"1.1.0" [2018/08/31]-[2018/08/31]
  - 対局者名にpreset名を含めて棋譜を保存すると、棋譜から読み込んだときに対局設定ウィンドウの対局者名のところが
    preset名が含まれてしまうので、棋譜ファイルの対局者名のところにはpreset名を書き出さないように変更。
    - preset名、棋譜ファイル名や対局結果一覧ウィンドウには含めても良いが、棋譜上には書き出さないのが吉。
  - 対局結果の保存設定ウィンドウの項目変更。
    - 保存上限数の設定、なくす。保存した(ファイルとして実在する)棋譜ファイルが勝手に消える仕様はわかりにくい。
    - 連続対局のときにフォルダを自動作成するオプション追加。
      - GUIを複数立ち上げるときにファイル名がかぶったりして気持ち悪いため。
  - 棋譜ファイルを保存するときなど、フォルダがなければ自動的に作成するように。
  - 対局結果一覧ウィンドウに「対局結果一覧のクリア」ボタンを追加。
  - 対局結果一覧を記録しているcsvファイルの追記、排他openにする。ソフトの同時起動のため。(masaさん)
  - 対局結果一覧ウィンドウに保存先フォルダを開くボタン追加。
    - 対局結果一覧ウィンドウで、棋譜保存フォルダを開くボタンをクリックしたとき、棋譜が選択されていれば、
      そのファイルが選択された状態でexplorerを開く。
  - 連続対局中にその旨を画面上に表示するように。(48さん他)
    - 対応しました。勝敗とRも表示するようにしました。
  - 棋譜ファイルを読み込んだ時に駒落ちのときに対局開始時に上手/下手と表示されないことがある。(48さん)
    - 駒落ちの判定きちんとするようにしました。(任意局面であっても駒が平手から欠落していれば駒落ちと判定。後手側が上手、先手側が下手と判定。)
  - アセンブリバージョンを1.2.0に。(忘れないうちに変更)


- "1.0.8"→"1.0.9" [2018/08/28]-[2018/08/30]
  - 秒読みのときに対局中断したときに、0/10のように分子が0になってしまうのを修正。
    - タイマーを停止させる直前の文字列を復元するようにした。
  - 対局終了後、ネームプレートが初期化されるの修正。
  - 棋譜に名前をつけて保存するときに思考エンジンの場合はプリセット名も含めて保存するように。
  - メニューに「ウィンドウ」→「対局結果一覧」
    - 対局結果棋譜の読み込みが出来るようになった。とりま、対局結果一覧はこれでいい感じ。
    - 対局結果のクリアとか必要？上限に達した分を自動削除していくコードが必要。あとで考える。
  - メニューに「ウィンドウ」→「対局結果の自動保存設定」追加。
  - 対局結果一覧ウィンドウの追加
    - 対局棋譜の自動保存
    - 対局結果の一覧
  - 盤面編集で移動元と移動先が同じだと手駒が増える。(masaさん)
    - 前回仕様を変更したときの修正忘れでした。修正しました。
  - 千日手の判定がおかしい。(masaさん)
  - Hashの計算用のテーブルの手駒のところの初期化が一部間違っていて、手駒があるときに同一局面だと判定されないバグがありました。修正しました。
  - 対局中に長時間放置しているとメモリ不足で落ちる。(zu2さんの指摘)
    - MenuItemがリソースリークしていました。修正しました。
  - ミニ盤面を対局開始の局面になっているほうが良いのでは。(masaさん)
    - そうするようにしました。
  - ミニ盤面、駒落ちのときに駒が駒箱のところに散らばったままになるの修正。
  - 細長い駒台表示のときに駒落ちにしてると駒箱のところに駒が表示されるの修正。


- "1.0.7"→"1.0.8" [2018/08/25]-[2018/08/28]
  - 対局設定ダイアログに連続対局のときに先後入れ替えないオプションを追加
  - 「先後入替」したときに、「後手の時間設定を個別にする」でなければ先後の持ち時間を入れ替えるべきでない。連続対局についても同様。(48さん)
    - 対応しました。
  - 連続対局でプレイヤーを入れえるとき、終了後に元の状態に戻す処理追加。
  - 盤面編集で移動元・移動先の2駒交換になるの、将棋所やShogiGUIのように手駒に移動して欲しい。(matrixさん)
    - そのように仕様変更しました。また2駒目が玉の場合、駒箱に移動するようにしました。
    - あと、手駒の駒を盤面に移動させたとき、その升に駒があったら、手駒を移動させたほうの駒台にその駒を戻すようにしました。
  - 対局開始時、駒落ちなら「先手」「後手」ではなく「上手」「下手」と表示。(masaさん)
    - 対応しました。
  - 局面図の出力において、「５八金まで」のように最終手の指し手も出力するようにした。(Mizarさんのプルリク)
  - 詰みの局面から開始したときに、「対局開始」だけが表示されるの「対局終了」だけが表示されるように修正。
  - 検討モードに入るときにも「対局開始」と表示されていたの修正。


- "1.0.6"→"1.0.7" [2018/08/24]-[2018/08/25]
  - 人間同士の対局で、検討ウィンドウが必要ないときは、最初から生成しないようにする。
    - 子ダイアログを一瞬表示して消すと(デスクトップと親ダイアログの再描画が発生して)画面がちらつくので。
  - 対局開始＆対局終了、勝ち、負け、引き分けの画面エフェクト追加
  - 対局開始時に盤面反転が起きるときに盤面がちらつくことがある問題修正。
  - KIF形式での局面図の出力修正。
    - V1.01でSVG出力対応にしたとき以降、KIF形式の局面図の出力が動かなくなっていた模様。
    - KIF: 局面図出力で1手前が無くとも問答無用で1手戻そうとしていた #45 (Mizarさんのプルリク)
  - 連続対局で「現在の局面」からが機能するようになった。
    - 特定の局面の形勢の優劣の研究に使えそうな？
  

- "1.0.5"→"1.0.6" [2018/08/22]-[2018/08/24]
  - 棋譜の分岐の途中の局面から対局を開始したときに、棋譜ウィンドウの選択行がその局面ではなく分岐開始のところになるのを修正。
  - 次分岐ボタンが有効(Enable = true)な状態で対局再開したときにずっと次分岐ボタンが有効になっているの修正。
  - 分岐を作って、その分岐の手で「本譜」ボタンを押した直後に「次分岐」ボタンが効かない。(ぐららるさん)
    - 修正しました。
  - 連続対局のときに思考エンジンに対してisreadyコマンドを送信するようにした。
  - USIエンジンに対して、終局時に"gameover win"など"gameover"メッセージを送信するようにした。(連続対局の時にも適用)
  - メニューの表示のところ、ショートカットキーが重複してたの修正。
  - 連続対局の途中で対局開始をしたときに例外で落ちることがある。(masaさん)
    - Restartの処理がまずかったので修正。
  - デバッグウィンドウに「ログのクリア」ボタン追加。
  - 「デバッグの開始」を選ばずともログは全部メモリ上に残していくようにする。
  - 「デバッグの開始」をメニューから削除。「デバッグウインドウ」→「デバッグ用のログ」に変更。


- "1.0.4"→"1.0.5" [2018/08/21]-[2018/08/22]
  - 成り/不成の選択、後手側だと180度回転させてあって欲しい。(ぐららるさん)
    - 持ち時間設定の表示も180度回転させるべきという話になりそう。それは画面レイアウトずいぶん変更しないといけないのでタブレット端末対応の時に。
  - 詰検討のエンジン設定の個別設定に自動Hashの項目がないの修正。
    - 修正しました。見出しも追加しました。
  - 詰検討が落ちる件(ぐららるさん)
    - まだメモリが二重に確保されてました。メモリの多い環境で実行するとメモリが2重に確保された時にメモリ不足で落ちているようでした。エンジン側を修正しました。
  - TIME UPまでの時間が1秒多かったのを修正。
  - 秒読みのときに時間切れになったときに残り時間の表示が0/3になるのおかしいので修正。
  - 棋譜ウィンドウ・検討ウィンドウの表示手番文字を▲△から☗☖に戻す
  - 棋譜ウィンドウ・検討ウィンドウのCSA形式の表示選択追加対応。


- "1.0.3"→"1.0.4" [2018/08/19]-[2018/08/21]
  - 棋譜・検討ウィンドウの読み筋のところ、chess式の表示があって欲しい。(masaさん)
    - メニューの「表示」のところから選べるようにしました。
  - 棋譜ウィンドウで時間切れの時など、手番記号がなかったの修正。
  - 開始局面で、タイマー進んでないの修正。
    - エンジン初期化中の表示を行うために修正したときの影響。
    - 初期化が一瞬で終わる場合(人間同士の対局や詰検討)にタイマーの初期化等がGameModeの変更より早いタイミングで行われてしまうのが原因
    - V1.03で詰検討が一部の環境で落ちていたの、これが原因っぽい。

  - Windowを最小化して、終了させたときに次回起動時に変な場所にWindowが行く。(kumaさん)
    - 修正しました。検討ウィンドウのほうも同様の問題があったので修正しました。
    - また、メインウィンドウを表示するデスクトップ座標が、スクリーンの移動・変更などによって失われていたら、プライマリウィンドウに表示するようにしました。
  - メイン以外のFormのアイコン出てるの消す
  - フォントサイズがバラバラなのを統一する。(11ptで統一。設定上は11.25pt) 一部だけ9pt


- "1.0.2"→"1.0.3" [2018/08/16]-[2018/08/19]
  - 速攻時間切れ負けになったときに「ありがとうございました」を2回読み上げるの修正。
  - 先手と後手が異なる持ち時間設定であるときに後手のエンジンが切れ負けになる現象。(masaさん)
    - エンジンオプションのデフォルト値
      - NetworkDelay2 300 → 550に変更。
      - NetworkDelay 120 → 350に変更。(片道150msほどかかる + 誤差が0.1～0.2秒ほどあるようなので..)
    - これを反映するには、メニューの「ファイル」→「設定の初期化」→「各エンジン設定の初期化」で設定を初期化する必要がある。
  - 持ち時間なし + 1手2秒加算でやるといきなり時間切れになる件。
    - 1手ごとの秒加算、指し手の前にやらないといけないのに、指し手を指したあとにしていたのを修正。
  - 盤面編集の初期配置に「双玉で玉以外すべて駒箱に」を追加。
  - マウスのドラッグ＆ドロップで駒を移動させる時にも、駒が移動できる先の升のエフェクトを表示するように。(島田さんの要望)
    - 対応しました。
  - 盤面編集後、SVGなどで局面を書き出す時など、gamePly(ゲーム開始からの手数)が1になっていなかったのを1に固定するように修正。
  - 詰将棋エンジンでの検討で時刻が表示されていない件(masaさん)
    - 時間を思考エンジンからinfoで送られてきたtimeを使っていたが、こういうのはサーバー側計測であるべきなので
      サーバー側で勝手に時間を埋めることにした。
  - 検討ウィンドウに経過時刻、fだけでなくff(小数点以下2桁)まで表示するようにした。
  - mateとupperbound/lowerboundの組み合わせでparse errorになっていたの修正。
    - WhaleWatcherも同様だったので、えびふらいさんに報告しといた。


- "1.0.1"→"1.0.2" [2018/08/14]-[2018/08/15]
  - 棋譜の読み込みに失敗したときに棋譜ウィンドウの棋譜をリセットするようにした。
  - 盤面編集から抜けたあとは、棋譜ウインドウはクリアした方が良い。(masaさん)
    - 修正しました。
  - SVG出力で持駒領域が長くなったときに二段組にする #40 (tibigameさんのプルリク)
  - 起動直後に検討モードにしつつ駒移動のマウス操作をすると落ちる件。(和差積 商さん)
    - 合法手の判定、強化しました。(再現しないのでこれで修正できているかどうかよくわかりません)
  - デバッグウインドウで複数行の選択、Ctrl+Cで選択行のクリップボードへのコピーが出来るようにした。
  - エンジンオプション設定、デフォルト値に戻す手段が欲しい。(まふさん)
    - エンジンオプションのデフォルト値をTooltipのなかに表示するようにした。
    - メニュー「ファイル」→「設定の初期化」→「各エンジン設定の初期化」を追加。
    - メニュー「ファイル」→「設定の初期化」→「各表示設定などの初期化」を追加。
  - 検討ウィンドウのカラムの横幅を次回起動時に復元して欲しい。(masaさん)
    - 対応しました。
  - KIF形式で書き出した棋譜ファイルがKifu for Windows V7で読み込めない件に対応。(Mizarさんのプルリク)
    - 柿木将棋Ⅸで書き出した棋譜ファイル、手合割と持駒と同時に指定してあるが、これが読み込めるように修正。(Mizarさんのプルリク)
  - 詰将棋エンジン
    - 詰将棋エンジンで指定したHashの2倍のメモリが確保されていたのを修正。
    - 詰将棋エンジンでHashに16MBを指定したときに4096MB確保されるの修正。
  - 対局開始時、「エンジン初期化」が表示されるタイミングが遅い件。(ぐららるさん)
    - 改良しました。
  - 手番表示、名前に被る件。(tibigameさん)
    - ネームプレートと棋譜ウィンドウ少し下げて、ネームプレートの左上に持ってくる？
    - あまりいい画面レイアウトでもないのでこの件は見送り。
    

- "1.0.0"→"1.0.1" [2018/08/07]-[2018/08/14]
  - ショートカットキーの割り当て
    - Ctrl+Vをクリップボードからのペーストに割当て
    - Ctrl+CをクリップボードへのKIF形式での棋譜コピーに割当て。
    - Ctrl+Sを上書き保存に割り当て。
    - Ctrl+Nを通常対局に割り当て。
    - Ctrl+Eを盤面編集に割り当て。
  - エンジンでの検討中のファイルメニューを無効化するように変更。
  - エンジン側で例外が発生したときにGUI側、エラーダイアログを出して、終了させるようにした。
  - 検討ウィンドウの読み筋で１一への駒打ちの候補手が同～と表示される症状の修正 #37(Mizarさんのプルリク)
  - Clipboardメニュー追加・SVG出力周り整備 #36 (Mizarさんのプルリク)
    - メニューの「ファイル」→「クリップボードにコピー」,「クリップボードからペースト」追加。
  - 詰将棋のエンジン設定ダイアログで秒数の指定が出来るようにした。
    - timeoutの処理を追加した。時間内に詰みが発見出来なかった時に、その旨を検討ウィンドウに出力するようにした。
    - 詰みを発見できなかったときの評価値がMATEになっているの修正。
  - 詰将棋エンジンに関して
    - 詰み手順を復元する探索ルーチンの中で受け手側の手番かつ王手がかかっている状況で1手詰みルーチンを呼び出すバグを修正した #85(tanuki-さんのプルリク)
    - 逆王手がかかっている局面でも詰みを探索するようにした #84  (tanuki-さんのプルリク)
  - SVG形式での局面保存に対応(メニューのファイル→局面の保存) (tibigameさんのプルリク)
  - ウィンドウを最大化したならそれを終了時に保存/次回起動時に復元すべき。(tanuki-さん)
    - 最大化状態であるかどうかは保存されていないが、現在の実装で、DesktopLocationとサイズ自体は保存されているのでまあいいような…。
  - tooltipに間違えてVSのデザイナーから"\r\n"を使っていた箇所がある件。(和左積 商さん)
    - 「検討エンジン設定」ダイアログの「詳細設定」ボタンのtooltip、修正しました。


## β版 → マスターアップまで[2018/07/26]-[2018/08/05]


- β10.1を『将棋神やねうら王』(2018年8月31日発売)のマスターアップ版としました。開発・テストにご協力いただいた皆様、ありがとうございました。


- β10からβ10.1で改修した点[2018/08/05]
  - 待った絡みで棋譜ウィンドウの表示がおかしくなることがある件。(まふさん)


- β9からβ10で改修した点[2018/08/05]
  - 局面を読み込ませての検討モードの時に11の駒を取る移動が同Xと検討の読み筋に表示される。(ぐららるさん)
    - 修正しました。
  - 読み筋に出現する「resign」は「投了」と表示するように。
  - 「検討時の駒音」変更したときにメニュー更新されない。(ぐららるさん)
    - PieceSoundOffTheGameの変更に対してUpdateMenuItem()のハンドラセットしてなかった。


- β8からβ9で改修した点[2018/08/05]
  - エンジン同士の対局で「中」を押した時にファイルメニューがアクティブにならないことがある。(masaさん , まふさん)
     - たぶん修正できた。
  - 検討モード、詰検討モードから「検」「詰」ボタンを押しても反応しないことがあったの修正。
  - 棋譜を開いて終局図を出したときに駒が浮いた状態になることがある。(uuunuuunさん)
    - 駒選択状態から、棋譜読み込み・棋譜貼り付けなどを行うとこの状態になる。修正しました。
  - 詰検討で秒数指定をして検討を開始すると例外が出る。
    - 詰将棋エンジン側が対応してない。 
    - とりま、詰検討設定の時間設定をするGroupBox無効化しておく。発売後のアップデートで対応するかも。
  - COM同士の対局のあと検討を開くとnull参照で落ちる件。(うさ親さん)
  - 読み筋にある win(宣言勝ち) が表示されない。
    - 読み筋に宣言勝ち、千日手、千日手勝ち、千日手負け、優等局面、劣等局面を表示するようにした。
    - 宣言勝ちと千日手引分が表示されることは確認した。他は局面がなくてわからない。
  - RDPで棋譜の再生時に表示が乱れる件。(suimonさん)
  - 手数が長くなってくると棋譜ウィンドウでの移動時に画面がちらつく件。(うさ親さん)
  - 詰将棋エンジンの個別設定が反映していなかった件、修正。
  - 詰将棋用エンジンのオプション画面、それ用にカスタマイズした。
  -  エンジン選択ダイアログを閉じたときに画面ちらついてたの、ちらつかなくなった。
  - 「エンジン選択ダイアログ」が2つ出た状態になる件。(kumaさん)
    - 修正しました。
  - 対局終了後に読み上げがずっと続くの止められない件。(kumaさん)
    - 対局終了でそこで以降の読み上げをキャンセルして「ありがとうございました」の音声を出すことにした。
    - メニュー → 音声のところで選択できるようにしました。
  - 宣言勝ちが非合法手に扱われてしまうことがある件。(masaさん)
    - 対局設定ダイアログの入玉設定の項目の並び順がエンジンオプション設定の同設定の項目の並び順とが異なっていたのが原因。修正しました。
  - ダイアログのセンタリングで画面外に出ることがある件。(tanuki-さん)
    - 新しく作られるダイアログが画面外に出ないように修正しました。
    - 上下・左右のどちらかにめり込まないと表示できない時は、右と下にめり込むのは許容。左と上にめり込むのは認めない。(ウィンドウのドラッグ、閉じるが出来なくなるため)


- β7からβ8で改修した点[2018/08/04]
  - 検討モードまわりの修正。
    - 検討時にOutputFailLHPVをfalseにしてなるべく綺麗なPVにする。
    - 継ぎ盤で棋譜、末尾に行ったあと左を2回押さないと1手戻らないの修正。
    - 対局開始時に継ぎ盤の局面を初期化するようにした。
    - 読み込んだ棋譜がいま表示している棋譜と同じ行数だったときに局面が移動しないバグ修正。
    - 棋譜ウィンドウのカーソルがある場所と違う局面になっている。(tibigameさん)
    - 検討モードで検討ウィンドウを閉じたのなら、エンジンを終了させ検討モードを抜ける。
    - 検討中にToolStripの◀▶で局面を移動させた時にその局面での思考が開始されないの修正。
    - 検討中に棋譜ウィンドウで局面を移動させた時にその局面での思考が開始されないの修正。
  - EngineDefine.MinimumHashMemory = 100→128に変更する。(2の冪乗でないとうまく扱ってくれないエンジンがありうるので)
  - 詰将棋エンジンまわりの作業
    - Position.IsLegal()の駒打ちの駒が違法であるのを除外できてなかったの修正。
    - "info score mate +"のようなMateに付随するスコアがparse失敗していたの修正。
    - 詰将棋、5手ほどしか手順が表示されないが、一応動いている。
    - これだけしか手順返ってこないの、エンジン側の仕様なのかな…。
      - 攻め方最短、受け方最長の手順でないからか。なるほど。


- β6からβ7で改修した点[2018/08/03]-[2018/08/04]
  - 検討ウィンドウにtanuki-2018初段　のようにプリセット名も表示するようにした。
  - 詰検討のときにtanuki-詰将棋エンジンが選べるようにした。
    - 詰将棋探索、実装まだ。
  - Windows7 2GB SSE3環境で動作しない(masaさん)
    - メモリで足りない可能性があるものの、SSE4以降でないとno sseのバイナリ、動かない可能性も。
    - 商用版、動作要件にSSE4以降を追加しておく。
    - Windows7の32bit環境はメモリ環境的にきつい(物理メモリが空いていても論理アドレス空間が2GBに制限されているのでそのため色々問題が発生する)ので、
      最低動作要件のOSのところに「32bit版のWindowsだと一部のエンジンが正常に動作しない可能性があります。64bit版のWindowsで動作させることを強く推奨します。」と注釈を追加
  - 検討開始した時に対局者名がエンジン名になってしまうの修正。
  - エンジンとの対局時で、対局者名を対局設定で変更しているときは、検討ウインドウの名前欄にエンジン名も括弧つきで表記するように。
	- 読み筋表示のところに定跡内容が表示された時にわかりにくい。
    - "info pv.."で解釈できない文字をそのまま検討ウィンドウの読み筋のところに表示するようにしました。
	- 序盤の定跡の局面で読み筋が表示されない
		- gpsfishが定跡の局面で読み筋を返さないため。修正考え中だが、gpsfishは最終的には製品版には含めないので急ぎの問題ではない。
    - これ仕様だということにする。
  - 検討モードで、検討エンジン選択ダイアログで選択したエンジンで検討するようにした。
  - GPSfish関連のフォルダ、Debug/engineから削除。
  - 32bit環境で8スレッド以上で動作しない件。(うさ親さん)
    - 8スレ以上割当らないように修正。
    - FAQに追加。
    - 思考エンジン側でスレッドに割り当てる論理アドレスが2GBを超えるため？
    - 32bit環境で8スレ以上を手動で割り当てた時に開始時にwarningを出すように。
  - 32bit環境でシステム情報を開くと落ちる。(うさ親さん)
    - 修正しました。
  - 読み込んだ棋譜から手動で新たに指し手を進めたら、未保存のフラグを立てて欲しい。(tibigameさん)
    - 修正しました。
  - 「▲７八飛　△８四歩」みたいな文字列を平手開始局面からの棋譜として読んで欲しい。(tibigameさん)
    - Mizarさんのプルリクで対応しました。
  - 2GB環境でQhapaqにて自動Hash60%,6スレは動くけど、自動Hash60%,8スレだと落ちる件。(うさ親さん)
    - 1スレッドあたり25MBはstackだけの計算で実際はそれ以外もあるので足りないのかも。1スレッドあたり40MBで計算するように修正しました。
  - メニュー　→　対局　→「検討モード」を「検討エンジン設定」に変更。
    - 「検討エンジン設定」を選ぶか、「検」討ボタンを押して検討エンジンが設定されていないときに検討エンジン設定ダイアログを出すようにした。
    - 詰検討についても同様。
  - エンジン選択と詳細設定のダイアログもメインウィンドウに対してセンタリングする。
  - 「将棋神」のプリセットで、棋力に直接影響しそうなところに関して値を設定する。(NodesLimit = 0 , DepthLimit = 0 , MultiPv = 1など)
  - 「九段」～「10級」も DepthLimit = 0 , MultiPv = 1 を設定しておく。
  - エンジンの詳細設定で"ConsiderationMode"をtrueにしたときに "PvInterval"の設定値が無視される件(masaさん)
    - 設定のところに説明文追加
  - メインウィンドウの表示位置、前回起動時のものを保存するように。(まふさん)
    - 修正案(kumaさん)
      - 採用させていただきました。
  - 棋譜ウィンドウの横幅の設定、メニューの「表示」のところから「ウィンドウ」のところに移動。
  - 「将棋神」「カスタム」のところにCPU負荷の件を追記。
  - 棋譜判定の改善 #30 (tibigameさんのプルリク)
    将棋所、ShogiGUIからの局面コピーが通るように


- β5からβ6で改修した点[2018/08/02]
  - エンジンがevalの読み込みに失敗したとき、「エンジン初期化中」のダイアログが消えない。(kumaさん)
    - プロセス間通信が切断されたときに、エラーダイアログを表示するように修正。
  - 共通設定からEvalDirを削除した。
  - エンジン初期化のときに"isready"送信前にsetoptionを送信するようにした。
  - メニュー　→　「情報」　→　「操作説明(オンラインマニュアル)」　追加。
  - 検討時の駒移動に対してShogiGUIなどでは駒音がある。(Backgammonさん)
    - デフォルトでつけるようにしました。
    - オンオフをメニューの音声　→　検討時の駒音　でオンオフ出来るようにしました。
    - メニューの音声→「棋譜読み上げ」の表示名を「対局時の棋譜読み上げ」に変更。
  - 棋譜をドラッグ＆ドロップで読み込めるようにして欲しい。(まふさん)
    - 実装しました。
    - 対局中・検討中は貼り付けできないように。また、未保存の棋譜がある時には警告を出すように。
  - メニューのファイルのところ、ショートカットキーのOが２つあったの修正。
  - 棋譜がないときにメニューの「上書き保存」が選択できないように。
  - クリップボードからの棋譜の貼り付け(tibigameさん)
    - 実装しました。
    - 対局中・検討中は貼り付けできないように。また、未保存の棋譜がある時には警告を出すように。
  - 未知の形式の棋譜を読み込んだ時にエラーメッセージを表示するようにした。
  - エンジン設定ダイアログの「次ページ」ボタンが見つけにくい。(田中誠さん)
    - エンジン設定ダイアログの各オプション項目の説明文、わかりにくいのでToolTipで表示するように変更。
    - 個別設定のほう、共通設定に従うのチェックボックスが有効のときもToolTipが表示されるように修正。
  - エンジンのプリセット、Threads 4→2に変更。
    - 物理2コアのPCで4スレッドになるとCPU同士の対局でCPU負荷が100%になり続けるため。
  - CPU負荷100%になるの、初心者向きにはよろしくないのでは。(uuunさん)
    - 激指は、スレッド数をCPUの物理コア数にしているようで、デフォルトではCPU負荷は50%になる。
    - 物理コア数をデフォルト値に変更しました。
    - エンジンオプションのThreadsのところに説明文追記。
  - 検討開始した時に対局者名がエンジン名になってしまうの修正。
  - 検討ボタンを押した時に1度目、エンジン初期化のダイアログが出ない。(masaさん)
    - 出てるような…知らない間に修正された？
  - 検討ウィンドウがメインウィンドウに追従するの、メニュー→ウインドウ→検討ウィンドウのところから設定でオフに出来るようにした。
  - 検討ウィンドウを一度も出していないと検討ウィンドウの再表示が出来ないのを修正。
  - 対局設定でエンジン選択した時にたまにプリセット選ばれない時があるの修正。
    - 修正しました。
  - 対局設定で、CPUとの対局のときにCPU側の対局者名の名前を変更しても次に開くとリセットされている件を修正。
    - 修正しました。
  - 対局開始時、メモリ不足ならキャンセル出来たほうが良いのでは。(48さん)
    - ダイアログ修正しました。
    - キャンセルした時に終局していることを示すため「ありがとうございました。またお願いします。」の音声読み上げ追加。
  - ダイアログ、対局中の終了はwarningのダイアログに変更。
  - 対局者名が途中で切れるため「tanuki-」のSDT5と2018の区別がつかない件。(48さん)
    - 半角換算で16文字まで表示するように。(全角は2文字としてカウント)
  - 思考エンジンのプロセス優先度、下がっていない件。(kuma)
    - 間違ったコードになってました。修正しました。
  - 「メニュー」→「情報」→「よくある質問(FAQ)」追加
    - とりあえずMyShogiのGitHubのFAQのページが開くようにしておいた。
  - サウンドが再生されない環境がある。(tibigameさん他)
    - C#のSystem.Windows.Media.MediaPlayerで再生できない環境がある。
      - 他の再生手段をオプションで選択出来るべきか。
      - 多重再生の出来るMicrosoftがサポートしている現行の技術、これぐらいしかないのだが…。
    - 「Windowsの機能の有効化または無効化」→「メディア機能」→Windows Media Playerのチェックボックスをオンにすると音が出た！(tibigameさん)
    - WindowsMediaPlayerをアンインストールしてから再インストールすると再生されるようになるらしい。(ぐららるさん , うさ親さん)
    - このノウハウ、FAQに書いておく。 


- β4からβ5で改修した点[2018/08/01]
  - ×ボタンで閉じるとき、終了前に終了しますかのダイアログを出したほうが良いのでは。(kumaさん)
    - 対局中の×ボタン、棋譜が未保存の時の×ボタンに対しては警告を出すようにしました。
  - エラーならエラー、警告なら警告用のメッセージボックスを用いるようにする。
  - BookOnTheFlyのオプションに説明文追記。
  - 定跡 yaneura_book2.db それらしきものを発掘してきた。
	- 定跡を変更した時にエンジンオプションをどう設定すれば良いのか不明瞭。
		- 定跡周りのオプション設定の説明文、追加。
  - AutoHashの割合、80%→70%にデフォルト値を変更。AutoHashの説明文追加。
  - 対局設定のダイアログの各コントロールにTooltipで説明文追加。
  - 対局設定ダイアログに入玉条件の設定追加
  - エンジンオプション設定をしている時に対局ウィンドウの操作が出来ないようにする。(まふさん)
    - ModalDialogに変更しました。
  - 対局設定でエンジンが選択されていない状態で詳細設定ボタンが押すと落ちる。(masaさん)
    - ModalDialogに変更しました。
  - 対局設定で先後入替えた時に選択していたプリセットが入れ替わらない件。(masaさん)
    - 修正しました。
  - 対局設定で、同種エンジンを選択している時に、「二級」・「初段」のようにそれぞれ異なるプリセットを選択して
    ダイアログを閉じて、再度対局設定を開いた時に、その値が復元されていなかったの修正。
  - 32bit環境でメモリ割り当てに失敗する件。(うさ親さん)
    - エンジン本体の見積もりが小さすぎるようだ。
    - 各エンジンのWorkingMemory を 30から200に変更。
  - 32bit環境でThreadsが出てない件。(うさ親さん)
    - 各エンジン、ビルドしなおし。スレッドあたりのstack 100MB→25MBに変更。スレッド数×25MBを消費するとして計算しなおす。
  - NO SSEのエンジン、EvalShare機能なしでコンパイルしてあったのをEvalShare機能ありでコンパイルしなおす。
  - 検討ウィンドウ、lowerboundが++、upperboundが--。いまは逆になっている。(Mizarさん)
    - 修正しました。


- β3からβ4で改修した点
  - 時間無制限の時のコンピュータに渡す思考時間設定していなかった件。(tanuki-さん他)
    - 時間無制限の時はコンピュータ側は1手5秒で指すようにしました。
  - 対局設定の「詳細設定」絡みの操作で例外が出る件。(yoiyoi322さん)
    - 手順難しい。エンジン選択した時にまだ詳細設定ボタンが生きているのがおかしいのかな？
    - エンジン選択中に詳細設定押せなくする。
    - 詳細設定中にエンジン選択ボタンも押せなくする。
  - 対局設定で先後入替えを押した時、CPUのバナーが入れ替わらない。(うさ親さん)
    - 修正しました。
  - 先手5秒/4秒 , 後手5秒/10秒加算　にした時、後手持ち時間使い切ったあと即指しになる。後手の秒読み、エンジンに渡されていない。(masaさん)
    - 秒読みと秒加算の混合ってUSIでは非対応のような気が…。
    - 先手に対してはbyoyomiで渡して、後手に対してはinctimeで渡すようにする。
  - 共通設定のNetworkDelay2のデフォルト値を300に変更。
    - この値、1000以上にしていると秒読み1秒設定の時に即指しになってバグかと思う人がいるといけないので。
  - tanuki-2018の個別設定からEvalShare削除。
    - このエンジン、EvalShareに対応してないので。
  - tanuki-2018、将棋神でも4スレッドしか使っていない件。(48さん)
    - EvalShareのオプション持ってないのに"engine_options.txt"で無理やり生やして
      Threadsのオプションを上書きしてしまっていた。(調査協力、うさ親さん)
    - 修正しました。


- β2からβ3で改修した点
  - 棋譜ウィンドウの横幅を変更できるように。(48さん)
    - メニューの「表示」→「棋譜ウインドウの横幅」を追加。
  - Ponder設定、とりま、未実装なので非表示にしておく。
    - マスターアップに間に合わなさそうなので…。
  - 対局設定で先後入替えを押した時、後手の時間設定を個別にするがオフの時でも時間設定グループがアクティブになる。(masaさん)
    - 修正しました。
  - エンジンの基本優先度下げたほうが良いのでは。(masaさん)
    - AMD-A9 2コアで、これを下げておかないとCPUを使い切っている状況では音声がぶつ切りに。(うさ親さん)
    - デフォルトでプロセス優先度、下げるようにしました。
  - 形勢グラフ、デバッグ＆修正が間に合わない気がするのでとりま無効化する。
  - 対局中に対局メニューでエンジン変更が出来てしまう。(masaさん)
    - メニュー無効化するように修正。
  - 後手の時に評価値を手番側から見た評価値にする件。
    - メニューの「表示」のところに用意
    - 「後手番のCPUの評価値表示を反転させるか」
    - よく見たら、デフォルトではエンジンが返しているのは自分から見た評価値だった。(´ω｀)
    - 自分から見た評価値をデフォルトとする。(将棋所と同じ)
    - 検討ウインドウに出力している評価値、保存していないので、即時反映は出来なくて、次の出力以降が反転表示される。(いずれなおすかも)
  - レーティング公式、修正。(uuunuuunさん)
    - これにより、5級あたりが少し強くなり、9段あたりは少し弱く調整される模様。
    - NodesLimit = 1000*Exp[(537-Sqrt[537^2 + 4*26.13(975-rate)]/(2*26.13))]
        // Excelの式で言うと　=1000*EXP((537-SQRT(537^2+4*26.13*(975-A1)))/(2*26.13))
    - 九段～十級まで用意した。
  - メニュー項目にアクセスキーを設定する。(kumaさん)
    - 対応しました。
  - 32bit環境で思考エンジンがメモリ割り当てに失敗することがある。(Wandre-sakさん)
    - 32bit環境、1プロセスが2GBまでしか使えないのでHASH割当の計算をするときに空き物理メモリ2GBとして計算すべき。
    - 空き物理メモリを取得する部分で32bit OSでは、空き物理メモリの値を最大でも2048MBとして扱うようにした。
  - LocalGameServerのスレッドで落ちた時に例外の捕捉が出来ていなかったの修正。
    - LocalGameServerのスレッドで落ちた時にもスタックトレースがちゃんと表示されるようになった。


- β1.1からβ2で改修した点
  - 棋譜の名前をつけて保存でデフォルト値を「先手名後手名_YYYYMMDDHHmmss.kif」にして欲しい。(ぐららるさん)
    - 対応しました。
  - 検討ウィンドウの「着順」「R順」も解像度によって少し見切れる件(48さん)
    - ボタン少し大きくしました。
  - tanuki-2018のNO SSE版(32bit環境用)がない。(32bit環境でtanuki-2018が動作しない)
    - SSE4.2版、対局が始まらない。"isready"に対して応答しない。どうやらビルドに失敗している模様。
      - NO SSE版、buildに失敗していて実行ファイル自体が用意できていない。原因調査中。
      - tanuki-2018(NNUEエンジン)、AVX2以外のものを差し替えた。
      - SSE4.2 , SSE4.1 , SSE2 , NO SSE版(32bit版)すべて差し替え。
  - 対局設定、エンジンオプション設定、エンジン選択ダイアログで、低解像度の環境でダイアログの右と下が見切れる可能性がある件。(うさ親さん)
    - β1.1で修正できてなかったので再度修正。AutoScaleDimension = (96F,96F)でしか編集しないように。
    - これで修正できていることを確認。(うさ親さん)
  - BookDirエンジン設定の変なところにあるの修正。
    - エンジンオプションの共通設定にBookDir追加。
    - EvalDirのほうの説明文、追記。
  - エンジンオプションダイアログの「前ページ」「次ページ」が見切れる環境があるらしい。(島田さん)
    - 11pt→9ptに変更。


- β1からβ1.1で改修した点
  - エンジン選択ダイアログの下部ボタンの「次ページ」「前ページ」の文字が見切れている環境がある。(yoiyoiさん)
    - 文字フォントサイズを縮小。「選択」の文字も14→12ptに。
  - 32bit環境用の実行ファイル名が"XXX_no_sse.exe"を読みに行っているが、"XXX_nosse.exe"しか用意されていない件。(うさ親さん)
    - 32bit環境ではどれも実行できない状態でした。(´ω｀)
    - 後者のファイルを読みに行くように修正。
  - 対局設定、エンジンオプション設定、エンジン選択ダイアログで、低解像度の環境でダイアログの右と下が見切れる可能性がある件。(うさ親さん)
    - 一応、強制的にリサイズして修正するコードを書いてみたけど修正されているかは謎。

