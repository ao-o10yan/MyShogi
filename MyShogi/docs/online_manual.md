
# 操作説明(オンラインマニュアル)


- 『将棋神やねうら王』(2018年8月発売)に関するマイナビ公式のアップデート情報については、[マイナビ 将棋神やねうら王](https://book.mynavi.jp/ec/products/detail/id=92007)をご確認ください。
- サウンドが再生されない、CPU負荷が高すぎる/低すぎるなどについては、[よくある質問集](faq.md)をご覧ください。
- デバッグ機能の使い方などは、[開発者向け機能](dev_manual.md)をご覧ください。
- 今後のアップデートの予定など、作業進捗については、[WIP](WIP.md)をご覧ください。
- バグ、要望等は、[バグ・要望等　総合受付](https://github.com/yaneurao/MyShogi/issues/33)にどうぞ。
- ここではそれら以外の操作説明について書いてあります。


## 通常対局の仕方


- 書きかけ

- Q) エンジンの詳細設定の各オプションを元の値に戻したい。
  - A) マウスをオプション項目のところにホバーさせるとtooltip(説明)が出ます。その一番下に元の値が「デフォルト値 = XXX」という形で表示されています。
  - すべてのエンジンオプションの初期化を行うには、次の機能でできます。
    - メニュー「ファイル」→「設定の初期化」→「各エンジン設定の初期化」

- Q) 秒読み3秒のときに3/3になる前に時間切れで負けになる。
  - A) 秒読み3秒のときは2.99秒まではセーフで、2.99秒は表示上は2/3です。
    この状態までが時間切れではないという解釈で、3/3になった時点(3.00秒)で時間切れになります。
    ※　製品版(V1.00)では、3.99秒までをセーフとしていたのですが、その後のV1.05以降で2.99秒までをセーフであると修正しました。


## 検討モードの使い方

- Q) 検討モードのミニ盤面はどうやったら動きますか？
  - A) 読み筋のところをクリック(or カーソルキーなどで選択)すると、検討ウィンドウのミニ盤面にその局面と変化が反映されます。そのあと、ミニ盤面の下にある「◀」「▶」などで局面を進めたり戻したりできます。


- Q) 評価値とは何ですか？
  - A) 思考エンジンが現在の局面の形勢をどのように評価しているかを数値化したものです。
    良いとプラス、悪いとマイナスの値になります。
    歩1枚の点数が100点を意味するように正規化されて表示されています。
    - 将棋では、手駒という概念があるので、歩1枚の駒得は、自分の手駒の歩(+100) + 相手の歩の欠損(+100) = +200の評価値として表現されます。
    - 詰みを見つけた時の値は大きな値になります。

- Q) 後手の評価値は手番側(後手)から見た評価値ですか？
  - A) デフォルトではそうなっています。
  - これは、メニューの「表示」→「後手番のCPUの評価値を反転表示させるか」のところから反転させることが出来ます。

- Q) 手番側から見た評価値だと、形勢グラフに先手と後手と両方の評価値をプロットしたときに後手は符号を逆にしないとおかしくなりませんか？
  - A) はい、おかしくなります。このため、形勢グラフを見ることが前提にあるなら、後手番の評価値は反転表示されていないと紛らわしいように思います。

- Q) "++/--"の列はどういう意味ですか？
  - A) その評価値がupperbound(≒上限値)、lowerbound(≒下限値)であることを示します。
      例えば、"++"と出ていて、評価値が1000と出ていれば、真の値(本当の評価値)は、それよりは低そうだと思考エンジンは見積もっているということを示しています。

- Q) 読み筋に表示されることのある「優等局面」「劣等局面」とは何ですか？
  - A) 将棋で4手セットで、歩を無条件に相手に渡すことがあります。「23歩成、同玉、24歩、22玉」を繰り返すと先手のほうは手駒の歩が1つずつ相手の手駒に移動します。
    これは元の局面より絶対的に優れていると考えられるので、思考エンジンはここで読みを打ち切ります。
    このとき「(先手から見て)劣等局面に突入」したと言います。後手から見ると「優等局面に突入した」と言います。

- Q)「候補手５手」になっているのに平手の開始局面で5手以上表示されます。
  - A) 定跡にヒットした場合は、その内容をすべて表示します。これは仕様です。

- Q) 定跡にヒットしたときに読み筋の指し手のところに「(98.3%)」のような数字が書いてありますが、これは何ですか？
  - A) その定跡の出現率です。実戦譜のようなものから生成した定跡ファイルだと、出現頻度が記載してあるので、それを表示しています。

- Q) 継ぎ盤(ミニ盤面)を大きくしたいのですが。
  - A) 検討ウィンドウのウインドウ自体の高さをマウスで(ウィンドウの隅をドラッグして)変更するとそれに追随して自動的に継ぎ盤も大きくなります。


## 詰将棋モードの使い方


- Q) メモリがたくさんある環境で詰検討を開始すると例外が出てソフトが終了します。
  - A) 申し訳ありません。エンジン側がメモリを開始二重に確保していました。Update1で修正されます。


## 盤面編集


- Q) 盤面編集で成り駒を作るには
  - A) 駒の上でマウスの右クリックをすると先手の駒→先手の成り駒→後手の駒→後手の成り駒という順番で変化します。


## 表示設定について


- Q) 表示設定をすべて初期状態に戻すことはできますか？
  - A) 次の方法で出来ます。
    - メニュー「ファイル」→「設定の初期化」→「各表示設定などの初期化」


## 棋譜の入出力


- 棋譜をファイルから読み込むには、メニューの「ファイル」→「棋譜を開く」を選びます。
- 棋譜をファイルに書き出すには、メニューの「ファイル」→「棋譜に名前をつけて保存」 を選びます。
 
- 対応している棋譜/局面のフォーマット KIF,KI2,CSA,SFEN,PSN,PSN2形式
  - 棋譜を読み込む時は、どのフォーマットであるか自動判定します。
  - 書き出し時は、上記のどの形式で書き出すのかを選択する必要があります。

- Q) 局面図を将棋の書籍にある局面図のような白黒画像で出力したいのですが。
  - A) 画像で出力する機能はありませんが、SVG形式でファイルに出力する機能はあります。
    メニュー「ファイル」→「局面の保存」でSVG形式を選択すれば、SVG形式でファイルに書き出すことが出来ます。
    このファイルは、Chrome , IE , Microsoft Edgeなどのブラウザで開くことが出来ます。ブラウザによって微妙に見え方が異なります。Chromeをお勧めします。
  
- Q) KIF形式で書き出したファイルが柿木将棋IXで読み込めません。
  - A) 本ソフトは、棋譜の文字のエンコードをutf-8で書き出すためです。(柿木将棋がUnicodeのファイルに対応していないためです。)
    - 解決策1) 本ソフトで保存したファイルをテキストエディタで開いてsjisで保存しなおすと読み込めるようになります。
    - 解決策2) 本ソフトのメニューの「ファイル」→「クリップボードに棋譜/局面をコピー」でKIF形式を選び、柿木将棋にCtrl+Vで貼り付ければ読み込めます。
    - Kifu for Windows V7 , 将棋所 , ShogiGUIでは問題なく読み込めるようです。

- Q) 文字のエンコード、sjis(Shift_JIS)で書き出す機能はありませんか？
  - A) 対局者名にsjisで表現出来ない文字を使うことがありますし、sjis形式のkifファイルは将来的になくなっていくと考えられるのであえてつけていないです。


## 便利な機能(tips)


- 棋譜ファイルをメインウインドウにドラッグ＆ドロップするとその棋譜が読み込めます。
- メインウインドウがアクティブな時にCtrl+Vで棋譜テキストをクリップボードから読み込む(貼り付ける)ことが出来ます。

